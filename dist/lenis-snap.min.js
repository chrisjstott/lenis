"use strict";var SnapModule=(()=>{var b=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var L=Object.prototype.hasOwnProperty;var O=(i,e)=>{for(var t in e)b(i,t,{get:e[t],enumerable:!0})},H=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of R(e))!L.call(i,n)&&n!==t&&b(i,n,{get:()=>e[n],enumerable:!(s=z(e,n))||s.enumerable});return i};var P=i=>H(b({},"__esModule",{value:!0}),i);var k={};O(k,{default:()=>f});function w(i,e){let t;return function(...s){let n=this;clearTimeout(t),t=setTimeout(()=>{t=void 0,i.apply(n,s)},e)}}function S(i){getComputedStyle(i).position==="sticky"&&(i.style.setProperty("position","static"),i.dataset.sticky="true"),i.offsetParent&&S(i.offsetParent)}function y(i){i?.dataset?.sticky==="true"&&(i.style.removeProperty("position"),delete i.dataset.sticky),i.offsetParent&&y(i.offsetParent)}function T(i,e=0){let t=e+i.offsetTop;return i.offsetParent?T(i.offsetParent,t):t}function g(i,e=0){let t=e+i.offsetLeft;return i.offsetParent?g(i.offsetParent,t):t}function E(i,e=0){let t=e+i.scrollTop;return i.offsetParent?E(i.offsetParent,t):t+window.scrollY}function M(i,e=0){let t=e+i.scrollLeft;return i.offsetParent?M(i.offsetParent,t):t+window.scrollX}var l=class{element;options;align;rect={};wrapperResizeObserver;resizeObserver;constructor(e,{align:t=["start"],ignoreSticky:s=!0,ignoreTransform:n=!1}={}){this.element=e,this.options={align:t,ignoreSticky:s,ignoreTransform:n},this.align=[t].flat(),this.wrapperResizeObserver=new ResizeObserver(this.onWrapperResize),this.wrapperResizeObserver.observe(document.body),this.onWrapperResize(),this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(this.element),this.setRect({width:this.element.offsetWidth,height:this.element.offsetHeight})}destroy(){this.wrapperResizeObserver.disconnect(),this.resizeObserver.disconnect()}setRect({top:e,left:t,width:s,height:n,element:r}={}){e=e??this.rect.top,t=t??this.rect.left,s=s??this.rect.width,n=n??this.rect.height,r=r??this.rect.element,!(e===this.rect.top&&t===this.rect.left&&s===this.rect.width&&n===this.rect.height&&r===this.rect.element)&&(this.rect.top=e,this.rect.y=e,this.rect.width=s,this.rect.height=n,this.rect.left=t,this.rect.x=t,this.rect.bottom=e+n,this.rect.right=t+s)}onWrapperResize=()=>{let e,t;if(this.options.ignoreSticky&&S(this.element),this.options.ignoreTransform)e=T(this.element),t=g(this.element);else{let s=this.element.getBoundingClientRect();e=s.top+E(this.element),t=s.left+M(this.element)}this.options.ignoreSticky&&y(this.element),this.setRect({top:e,left:t})};onResize=([e])=>{if(!e?.borderBoxSize[0])return;let t=e.borderBoxSize[0].inlineSize,s=e.borderBoxSize[0].blockSize;this.setRect({width:t,height:s})}};var x=0;function v(){return x++}var f=class{constructor(e,{type:t="mandatory",lerp:s,easing:n,duration:r,velocityThreshold:a=1,debounce:c=0,onSnapStart:h,onSnapComplete:d}={}){this.lenis=e;this.options={type:t,lerp:s,easing:n,duration:r,velocityThreshold:a,debounce:c,onSnapStart:h,onSnapComplete:d},this.onWindowResize(),window.addEventListener("resize",this.onWindowResize,!1),this.onSnapDebounced=w(this.onSnap,this.options.debounce),this.lenis.on("scroll",this.onScroll)}options;elements=new Map;snaps=new Map;viewport={width:window.innerWidth,height:window.innerHeight};isStopped=!1;onSnapDebounced;destroy(){this.lenis.off("scroll",this.onScroll),window.removeEventListener("resize",this.onWindowResize,!1),this.elements.forEach(e=>e.destroy())}start(){this.isStopped=!1}stop(){this.isStopped=!0}add(e,t={}){let s=v();return this.snaps.set(s,{value:e,userData:t}),()=>this.remove(s)}remove(e){this.snaps.delete(e)}addElement(e,t={}){let s=v();return this.elements.set(s,new l(e,t)),()=>this.removeElement(s)}removeElement(e){this.elements.delete(e)}onWindowResize=()=>{this.viewport.width=window.innerWidth,this.viewport.height=window.innerHeight};onScroll=({lastVelocity:e,velocity:t,userData:s})=>{if(this.isStopped)return;let n=Math.abs(e)>Math.abs(t),r=Math.sign(e)!==Math.sign(t)&&t!==0;Math.abs(t)<this.options.velocityThreshold&&n&&!r&&s?.initiator!=="snap"&&this.onSnapDebounced()};onSnap=()=>{let{scroll:e,isHorizontal:t}=this.lenis;e=Math.ceil(this.lenis.scroll);let s=[...this.snaps.values()];this.elements.forEach(({rect:o,align:m})=>{let p;m.forEach(u=>{u==="start"?p=o.top:u==="center"?p=t?o.left+o.width/2-this.viewport.width/2:o.top+o.height/2-this.viewport.height/2:u==="end"&&(p=t?o.left+o.width-this.viewport.width:o.top+o.height-this.viewport.height),typeof p=="number"&&s.push({value:Math.ceil(p),userData:{}})})}),s=s.sort((o,m)=>Math.abs(o.value)-Math.abs(m.value));let n=s.findLast(({value:o})=>o<=e);n===void 0&&(n=s[0]);let r=Math.abs(e-n.value),a=s.find(({value:o})=>o>=e);a===void 0&&(a=s[s.length-1]);let c=Math.abs(e-a.value),h=r<c?n:a,d=Math.abs(e-h.value);(this.options.type==="mandatory"||this.options.type==="proximity"&&d<=(t?this.lenis.dimensions.width:this.lenis.dimensions.height))&&this.lenis.scrollTo(h.value,{lerp:this.options.lerp,easing:this.options.easing,duration:this.options.duration,userData:{initiator:"snap"},onStart:()=>{this.options.onSnapStart?.(h)},onComplete:()=>{this.options.onSnapComplete?.(h)}})}};return P(k);})();
globalThis.Snap = SnapModule.default
//# sourceMappingURL=lenis-snap.min.js.map